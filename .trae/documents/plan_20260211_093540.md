# 实现计划

## 1. 深色/浅色模式实现

* **目标**：添加主题切换功能和全局CSS变量，以支持深色/浅色模式。
* **更改**：
  * **`App.vue`**：
    * 添加 `isDarkMode`状态（默认为浅色）。
    * 在 `.sidebar-footer`中，于“返回首页”按钮旁添加一个切换按钮。
    * 在 `:root`或动态样式块中，为全局颜色（背景、文本、边框）定义CSS变量。
    * 更新现有样式，以使用这些变量代替硬编码的十六进制值。
    * 为根容器添加 `transition: background-color 0.3s ease, color 0.3s ease`过渡效果。
  * **变量**：
    * `--bg-body`：页面背景。
    * `--bg-sidebar`：侧边栏背景。
    * `--text-primary`：主要文本颜色。
    * `--text-secondary`：副标题/次要文本颜色。
    * `--border-color`：边框颜色。
    * `--card-bg`：首页卡片背景。

## 2. 智能会话命名

* **目标**：根据用户的第一条消息自动重命名会话。
* **更改**：
  * **`App.vue`**​ **->**​ **`sendMessage`**​ 方法：
    * 检查当前会话是否为新创建的（例如，消息数量为1或名称为默认值）。
    * **逻辑**：
      * 提取用户消息的前50个字符。
      * 清理文本：移除HTML标签、特殊符号、多余空白。
      * 条件：如果清理后的文本长度 >= 10，则将其用作新标题。否则，保持“新会话”名称。
      * 操作：异步调用 `renameSession`API（不等待/不阻塞聊天流程）。
      * 用新名称更新本地会话列表的UI。

## 3. 聊天输出流优化

* **目标**：防止在流式输出过程中聊天气泡宽度发生抖动。
* **更改**：
  * **`ChatMessage.vue`**：
    * 分析宽度波动的原因（可能是 `width: fit-content`对 `LoadingDots`组件或变化的文本长度做出反应）。
    * **修复方案**：
      * 为AI消息设置一致的 `min-width`。
      * 确保 `LoadingDots`组件（或打字指示器）不会导致宽度变化超过最终内容的宽度。
      * 考虑在flex容器内设置 `width: 100%`或一致地使用 `white-space: pre-wrap`以稳定布局。

## 4. 会话删除UI优化

* **目标**：改进删除确认UI（布局稳定性、图标、定位）。
* **更改**：
  * **`App.vue`**：
    * **布局**：将 `.session-confirm-wrapper`更改为使用**绝对定位**覆盖在会话项上方，或调整flex行为，以防止父元素 `.session-item`在触发时重新调整大小（高度/宽度）。
    * **图标**：将文本/简单字符替换为更简洁的SVG图标或样式化的Unicode符号，用于“确认”（勾选）和“取消”（叉号）按钮。
    * **定位**：将按钮移动到项目的**右侧**（使用 `justify-content: flex-end`或绝对定位 `right: 0`）。
    * **样式**：确保按钮紧凑但可点击，并与深色/浅色主题匹配。

